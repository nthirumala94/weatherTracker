'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _utilArity = require('util-arity');

var _utilArity2 = _interopRequireDefault(_utilArity);

var _isGenerator = require('is-generator');

var _isGenerator2 = _interopRequireDefault(_isGenerator);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _parameter_type_registry_builder = require('./parameter_type_registry_builder');

var _parameter_type_registry_builder2 = _interopRequireDefault(_parameter_type_registry_builder);

var _helpers = require('./helpers');

var helpers = _interopRequireWildcard(_helpers);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function build(_ref) {
  var cwd = _ref.cwd,
      fns = _ref.fns;

  var options = {
    afterTestRunHookDefinitions: [],
    afterTestCaseHookDefinitions: [],
    beforeTestRunHookDefinitions: [],
    beforeTestCaseHookDefinitions: [],
    defaultTimeout: 5000,
    stepDefinitions: [],
    parameterTypeRegistry: _parameter_type_registry_builder2.default.build(),
    World: function World(_ref2) {
      var attach = _ref2.attach,
          parameters = _ref2.parameters;

      this.attach = attach;
      this.parameters = parameters;
    }
  };
  var definitionFunctionWrapper = null;
  var fnArgument = {
    addTransform: helpers.addTransform(options.parameterTypeRegistry),
    defineParameterType: helpers.defineParameterType(options.parameterTypeRegistry),
    After: helpers.defineTestCaseHook(cwd, options.afterTestCaseHookDefinitions),
    AfterAll: helpers.defineTestRunHook(cwd, options.afterTestRunHookDefinitions),
    Before: helpers.defineTestCaseHook(cwd, options.beforeTestCaseHookDefinitions),
    BeforeAll: helpers.defineTestRunHook(cwd, options.beforeTestRunHookDefinitions),
    defineStep: helpers.defineStep(cwd, options.stepDefinitions),
    setDefaultTimeout: function setDefaultTimeout(milliseconds) {
      options.defaultTimeout = milliseconds;
    },
    setDefinitionFunctionWrapper: function setDefinitionFunctionWrapper(fn) {
      definitionFunctionWrapper = fn;
    },
    setWorldConstructor: function setWorldConstructor(fn) {
      options.World = fn;
    }
  };
  fnArgument.Given = fnArgument.When = fnArgument.Then = fnArgument.defineStep;
  fns.forEach(function (fn) {
    return fn(fnArgument);
  });
  wrapDefinitions({
    cwd: cwd,
    definitionFunctionWrapper: definitionFunctionWrapper,
    definitions: _lodash2.default.chain(['afterTestRunHook', 'afterTestCaseHook', 'beforeTestRunHook', 'beforeTestCaseHook', 'step']).map(function (key) {
      return options[key + 'Definitions'];
    }).flatten().value()
  });
  options.afterTestCaseHookDefinitions.reverse();
  options.afterTestRunHookDefinitions.reverse();
  return options;
}

function wrapDefinitions(_ref3) {
  var cwd = _ref3.cwd,
      definitionFunctionWrapper = _ref3.definitionFunctionWrapper,
      definitions = _ref3.definitions;

  if (definitionFunctionWrapper) {
    definitions.forEach(function (definition) {
      var codeLength = definition.code.length;
      var wrappedFn = definitionFunctionWrapper(definition.code, definition.options.wrapperOptions);
      if (wrappedFn !== definition.code) {
        definition.code = (0, _utilArity2.default)(codeLength, wrappedFn);
      }
    });
  } else {
    var generatorDefinitions = _lodash2.default.filter(definitions, function (definition) {
      return _isGenerator2.default.fn(definition.code);
    });
    if (generatorDefinitions.length > 0) {
      var references = generatorDefinitions.map(function (definition) {
        return _path2.default.relative(cwd, definition.uri) + ':' + definition.line;
      }).join('\n  ');
      var message = '\n        The following hook/step definitions use generator functions:\n\n          ' + references + '\n\n        Use \'this.setDefinitionFunctionWrapper(fn)\' to wrap then in a function that returns a promise.\n        ';
      throw new Error(message);
    }
  }
}

exports.default = { build: build };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdXBwb3J0X2NvZGVfbGlicmFyeS9idWlsZGVyLmpzIl0sIm5hbWVzIjpbImhlbHBlcnMiLCJidWlsZCIsImN3ZCIsImZucyIsIm9wdGlvbnMiLCJhZnRlclRlc3RSdW5Ib29rRGVmaW5pdGlvbnMiLCJhZnRlclRlc3RDYXNlSG9va0RlZmluaXRpb25zIiwiYmVmb3JlVGVzdFJ1bkhvb2tEZWZpbml0aW9ucyIsImJlZm9yZVRlc3RDYXNlSG9va0RlZmluaXRpb25zIiwiZGVmYXVsdFRpbWVvdXQiLCJzdGVwRGVmaW5pdGlvbnMiLCJwYXJhbWV0ZXJUeXBlUmVnaXN0cnkiLCJXb3JsZCIsImF0dGFjaCIsInBhcmFtZXRlcnMiLCJkZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyIiwiZm5Bcmd1bWVudCIsImFkZFRyYW5zZm9ybSIsImRlZmluZVBhcmFtZXRlclR5cGUiLCJBZnRlciIsImRlZmluZVRlc3RDYXNlSG9vayIsIkFmdGVyQWxsIiwiZGVmaW5lVGVzdFJ1bkhvb2siLCJCZWZvcmUiLCJCZWZvcmVBbGwiLCJkZWZpbmVTdGVwIiwic2V0RGVmYXVsdFRpbWVvdXQiLCJtaWxsaXNlY29uZHMiLCJzZXREZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyIiwiZm4iLCJzZXRXb3JsZENvbnN0cnVjdG9yIiwiR2l2ZW4iLCJXaGVuIiwiVGhlbiIsImZvckVhY2giLCJ3cmFwRGVmaW5pdGlvbnMiLCJkZWZpbml0aW9ucyIsImNoYWluIiwibWFwIiwia2V5IiwiZmxhdHRlbiIsInZhbHVlIiwicmV2ZXJzZSIsImNvZGVMZW5ndGgiLCJkZWZpbml0aW9uIiwiY29kZSIsImxlbmd0aCIsIndyYXBwZWRGbiIsIndyYXBwZXJPcHRpb25zIiwiZ2VuZXJhdG9yRGVmaW5pdGlvbnMiLCJmaWx0ZXIiLCJyZWZlcmVuY2VzIiwicmVsYXRpdmUiLCJ1cmkiLCJsaW5lIiwiam9pbiIsIm1lc3NhZ2UiLCJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7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WCxDQUFnQkMsTUFBbkM7QUFDQSxVQUFNQyxZQUFZaEMsMEJBQ2hCNkIsV0FBV0MsSUFESyxFQUVoQkQsV0FBV3hDLE9BQVgsQ0FBbUI0QyxjQUZILENBQWxCO0FBSUEsVUFBSUQsY0FBY0gsV0FBV0MsSUFBN0IsRUFBbUM7QUFDakNELG1CQUFXQyxJQUFYLEdBQWtCLHlCQUFNRixVQUFOLEVBQWtCSSxTQUFsQixDQUFsQjtBQUNEO0FBQ0YsS0FURDtBQVVELEdBWEQsTUFXTztBQUNMLFFBQU1FLHVCQUF1QixpQkFBRUMsTUFBRixDQUFTZCxXQUFULEVBQXNCLHNCQUFjO0FBQy9ELGFBQU8sc0JBQVlQLEVBQVosQ0FBZWUsV0FBV0MsSUFBMUIsQ0FBUDtBQUNELEtBRjRCLENBQTdCO0FBR0EsUUFBSUkscUJBQXFCSCxNQUFyQixHQUE4QixDQUFsQyxFQUFxQztBQUNuQyxVQUFNSyxhQUFhRixxQkFDaEJYLEdBRGdCLENBQ1osc0JBQWM7QUFDakIsZUFBTyxlQUFLYyxRQUFMLENBQWNsRCxHQUFkLEVBQW1CMEMsV0FBV1MsR0FBOUIsSUFBcUMsR0FBckMsR0FBMkNULFdBQVdVLElBQTdEO0FBQ0QsT0FIZ0IsRUFJaEJDLElBSmdCLENBSVgsTUFKVyxDQUFuQjtBQUtBLFVBQU1DLG1HQUdBTCxVQUhBLDJIQUFOO0FBT0EsWUFBTSxJQUFJTSxLQUFKLENBQVVELE9BQVYsQ0FBTjtBQUNEO0FBQ0Y7QUFDRjs7a0JBRWMsRUFBRXZELFlBQUYsRSIsImZpbGUiOiJidWlsZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IGFyaXR5IGZyb20gJ3V0aWwtYXJpdHknXG5pbXBvcnQgaXNHZW5lcmF0b3IgZnJvbSAnaXMtZ2VuZXJhdG9yJ1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBUcmFuc2Zvcm1Mb29rdXBCdWlsZGVyIGZyb20gJy4vcGFyYW1ldGVyX3R5cGVfcmVnaXN0cnlfYnVpbGRlcidcbmltcG9ydCAqIGFzIGhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJ1xuXG5mdW5jdGlvbiBidWlsZCh7IGN3ZCwgZm5zIH0pIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBhZnRlclRlc3RSdW5Ib29rRGVmaW5pdGlvbnM6IFtdLFxuICAgIGFmdGVyVGVzdENhc2VIb29rRGVmaW5pdGlvbnM6IFtdLFxuICAgIGJlZm9yZVRlc3RSdW5Ib29rRGVmaW5pdGlvbnM6IFtdLFxuICAgIGJlZm9yZVRlc3RDYXNlSG9va0RlZmluaXRpb25zOiBbXSxcbiAgICBkZWZhdWx0VGltZW91dDogNTAwMCxcbiAgICBzdGVwRGVmaW5pdGlvbnM6IFtdLFxuICAgIHBhcmFtZXRlclR5cGVSZWdpc3RyeTogVHJhbnNmb3JtTG9va3VwQnVpbGRlci5idWlsZCgpLFxuICAgIFdvcmxkKHsgYXR0YWNoLCBwYXJhbWV0ZXJzIH0pIHtcbiAgICAgIHRoaXMuYXR0YWNoID0gYXR0YWNoXG4gICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzXG4gICAgfVxuICB9XG4gIGxldCBkZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyID0gbnVsbFxuICBjb25zdCBmbkFyZ3VtZW50ID0ge1xuICAgIGFkZFRyYW5zZm9ybTogaGVscGVycy5hZGRUcmFuc2Zvcm0ob3B0aW9ucy5wYXJhbWV0ZXJUeXBlUmVnaXN0cnkpLFxuICAgIGRlZmluZVBhcmFtZXRlclR5cGU6IGhlbHBlcnMuZGVmaW5lUGFyYW1ldGVyVHlwZShcbiAgICAgIG9wdGlvbnMucGFyYW1ldGVyVHlwZVJlZ2lzdHJ5XG4gICAgKSxcbiAgICBBZnRlcjogaGVscGVycy5kZWZpbmVUZXN0Q2FzZUhvb2soXG4gICAgICBjd2QsXG4gICAgICBvcHRpb25zLmFmdGVyVGVzdENhc2VIb29rRGVmaW5pdGlvbnNcbiAgICApLFxuICAgIEFmdGVyQWxsOiBoZWxwZXJzLmRlZmluZVRlc3RSdW5Ib29rKFxuICAgICAgY3dkLFxuICAgICAgb3B0aW9ucy5hZnRlclRlc3RSdW5Ib29rRGVmaW5pdGlvbnNcbiAgICApLFxuICAgIEJlZm9yZTogaGVscGVycy5kZWZpbmVUZXN0Q2FzZUhvb2soXG4gICAgICBjd2QsXG4gICAgICBvcHRpb25zLmJlZm9yZVRlc3RDYXNlSG9va0RlZmluaXRpb25zXG4gICAgKSxcbiAgICBCZWZvcmVBbGw6IGhlbHBlcnMuZGVmaW5lVGVzdFJ1bkhvb2soXG4gICAgICBjd2QsXG4gICAgICBvcHRpb25zLmJlZm9yZVRlc3RSdW5Ib29rRGVmaW5pdGlvbnNcbiAgICApLFxuICAgIGRlZmluZVN0ZXA6IGhlbHBlcnMuZGVmaW5lU3RlcChjd2QsIG9wdGlvbnMuc3RlcERlZmluaXRpb25zKSxcbiAgICBzZXREZWZhdWx0VGltZW91dChtaWxsaXNlY29uZHMpIHtcbiAgICAgIG9wdGlvbnMuZGVmYXVsdFRpbWVvdXQgPSBtaWxsaXNlY29uZHNcbiAgICB9LFxuICAgIHNldERlZmluaXRpb25GdW5jdGlvbldyYXBwZXIoZm4pIHtcbiAgICAgIGRlZmluaXRpb25GdW5jdGlvbldyYXBwZXIgPSBmblxuICAgIH0sXG4gICAgc2V0V29ybGRDb25zdHJ1Y3Rvcihmbikge1xuICAgICAgb3B0aW9ucy5Xb3JsZCA9IGZuXG4gICAgfVxuICB9XG4gIGZuQXJndW1lbnQuR2l2ZW4gPSBmbkFyZ3VtZW50LldoZW4gPSBmbkFyZ3VtZW50LlRoZW4gPSBmbkFyZ3VtZW50LmRlZmluZVN0ZXBcbiAgZm5zLmZvckVhY2goZm4gPT4gZm4oZm5Bcmd1bWVudCkpXG4gIHdyYXBEZWZpbml0aW9ucyh7XG4gICAgY3dkLFxuICAgIGRlZmluaXRpb25GdW5jdGlvbldyYXBwZXIsXG4gICAgZGVmaW5pdGlvbnM6IF8uY2hhaW4oW1xuICAgICAgJ2FmdGVyVGVzdFJ1bkhvb2snLFxuICAgICAgJ2FmdGVyVGVzdENhc2VIb29rJyxcbiAgICAgICdiZWZvcmVUZXN0UnVuSG9vaycsXG4gICAgICAnYmVmb3JlVGVzdENhc2VIb29rJyxcbiAgICAgICdzdGVwJ1xuICAgIF0pXG4gICAgICAubWFwKGtleSA9PiBvcHRpb25zW2tleSArICdEZWZpbml0aW9ucyddKVxuICAgICAgLmZsYXR0ZW4oKVxuICAgICAgLnZhbHVlKClcbiAgfSlcbiAgb3B0aW9ucy5hZnRlclRlc3RDYXNlSG9va0RlZmluaXRpb25zLnJldmVyc2UoKVxuICBvcHRpb25zLmFmdGVyVGVzdFJ1bkhvb2tEZWZpbml0aW9ucy5yZXZlcnNlKClcbiAgcmV0dXJuIG9wdGlvbnNcbn1cblxuZnVuY3Rpb24gd3JhcERlZmluaXRpb25zKHsgY3dkLCBkZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyLCBkZWZpbml0aW9ucyB9KSB7XG4gIGlmIChkZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyKSB7XG4gICAgZGVmaW5pdGlvbnMuZm9yRWFjaChkZWZpbml0aW9uID0+IHtcbiAgICAgIGNvbnN0IGNvZGVMZW5ndGggPSBkZWZpbml0aW9uLmNvZGUubGVuZ3RoXG4gICAgICBjb25zdCB3cmFwcGVkRm4gPSBkZWZpbml0aW9uRnVuY3Rpb25XcmFwcGVyKFxuICAgICAgICBkZWZpbml0aW9uLmNvZGUsXG4gICAgICAgIGRlZmluaXRpb24ub3B0aW9ucy53cmFwcGVyT3B0aW9uc1xuICAgICAgKVxuICAgICAgaWYgKHdyYXBwZWRGbiAhPT0gZGVmaW5pdGlvbi5jb2RlKSB7XG4gICAgICAgIGRlZmluaXRpb24uY29kZSA9IGFyaXR5KGNvZGVMZW5ndGgsIHdyYXBwZWRGbilcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGdlbmVyYXRvckRlZmluaXRpb25zID0gXy5maWx0ZXIoZGVmaW5pdGlvbnMsIGRlZmluaXRpb24gPT4ge1xuICAgICAgcmV0dXJuIGlzR2VuZXJhdG9yLmZuKGRlZmluaXRpb24uY29kZSlcbiAgICB9KVxuICAgIGlmIChnZW5lcmF0b3JEZWZpbml0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZWZlcmVuY2VzID0gZ2VuZXJhdG9yRGVmaW5pdGlvbnNcbiAgICAgICAgLm1hcChkZWZpbml0aW9uID0+IHtcbiAgICAgICAgICByZXR1cm4gcGF0aC5yZWxhdGl2ZShjd2QsIGRlZmluaXRpb24udXJpKSArICc6JyArIGRlZmluaXRpb24ubGluZVxuICAgICAgICB9KVxuICAgICAgICAuam9pbignXFxuICAnKVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGBcbiAgICAgICAgVGhlIGZvbGxvd2luZyBob29rL3N0ZXAgZGVmaW5pdGlvbnMgdXNlIGdlbmVyYXRvciBmdW5jdGlvbnM6XG5cbiAgICAgICAgICAke3JlZmVyZW5jZXN9XG5cbiAgICAgICAgVXNlICd0aGlzLnNldERlZmluaXRpb25GdW5jdGlvbldyYXBwZXIoZm4pJyB0byB3cmFwIHRoZW4gaW4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlLlxuICAgICAgICBgXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBidWlsZCB9XG4iXX0=